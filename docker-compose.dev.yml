services:
  mcp-dashboard:
    build:
      context: .
      dockerfile: Dockerfile.dev
    container_name: mcp-dashboard-dev
    ports:
      - "8000:8000"  # Dashboard UI
      - "8001:8001"  # Streamable HTTP
      - "8002:8002"  # SSE exposure
      - "8003:8003"  # OpenAPI exposure (mcpo)
      - "6274:6274"  # Inspector UI
      - "6277:6277"  # Inspector server
      - "4000:4000"  # Analytics server
      - "40001:40001"  # Proxy HTTP listener
      - "40002:40002"  # Proxy SSE listener
      - "40003:40003"  # Proxy OpenAPI listener
    environment:
      # Optional overrides:
      # - MCP_PROXY_BIN=mcp-proxy
      # - MCP_OPENAPI_BIN=uvx mcpo
      # - MCP_INSPECTOR_BIN=npx -y @modelcontextprotocol/inspector
      - MCP_DASH_DATA=/data/flows.json
    volumes:
      - ./data:/data
      - ./backend:/app/backend
      - ./frontend:/app/frontend
      - ./mcp-proxy:/app/mcp-proxy
    restart: unless-stopped

volumes:
  mcp-dashboard-data:
